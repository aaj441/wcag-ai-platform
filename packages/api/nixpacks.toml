#!/usr/bin/env bash
# Railway Nixpacks build script

set -e

echo "ğŸš€ Railway Build Starting..."
echo "Node version: $(node --version)"
echo "NPM version: $(npm --version)"

# Install production dependencies
echo "ğŸ“¦ Installing dependencies..."
npm ci --only=production

# Build TypeScript
echo "ğŸ”¨ Building TypeScript..."
npm run build

# Verify build output
if [ ! -d "dist" ]; then
  echo "âŒ Build failed: dist directory not found"
  exit 1
fi

echo "âœ… Build successful"
echo "Build size: $(du -sh dist | cut -f1)"
